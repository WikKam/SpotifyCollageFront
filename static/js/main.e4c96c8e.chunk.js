(this["webpackJsonpspotify-collage-front"]=this["webpackJsonpspotify-collage-front"]||[]).push([[0],{33:function(e,t,a){e.exports={container:"SelectorContainer_container__DlK0N",buttonContainer:"SelectorContainer_buttonContainer__2mZfj",collage:"SelectorContainer_collage__2bgTl"}},41:function(e,t,a){e.exports={App:"App_App__ysKGO","App-logo":"App_App-logo__2LG3B","App-logo-spin":"App_App-logo-spin__Aywya","App-header":"App_App-header__-_vIm","App-link":"App_App-link__or5j8",title:"App_title__2MQGa",description:"App_description__3lPP5",logo:"App_logo__3dKvc"}},42:function(e,t,a){e.exports={button:"Button_button__wDjBz"}},43:function(e,t,a){e.exports={title:"Logo_title__3czoP",logo:"Logo_logo__2_Bp_"}},48:function(e,t,a){e.exports=a.p+"static/media/Spotify_Logo_RGB_Green.11dc437a.png"},49:function(e,t,a){},60:function(e,t,a){e.exports=a(71)},65:function(e,t,a){},70:function(e,t,a){e.exports=a.p+"static/media/iCiel Gotham-Medium.022af2f6.ttf"},71:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),l=a.n(r),c=(a(65),a(11)),i=a(41),s=a.n(i),u=a(48),p=a.n(u),m=a(42),d=a.n(m),f=function(e){return o.a.createElement("div",null,e.link&&o.a.createElement("a",{onClick:e.onClick,className:d.a.button,href:e.href},e.children),e.button&&o.a.createElement("button",{onClick:e.onClick,className:d.a.button},e.children))},b=a(43),g=a.n(b),h=function(e){return o.a.createElement("div",{className:g.a.title},o.a.createElement("img",{alt:"spotify-logo",className:g.a.logo,src:e.src}),o.a.createElement("h1",null,e.children))},v=a(49),y=a.n(v),_=a(110),E=a(113),k=a(104),w=a(106),j=a(55),O=a(108),C=Object(j.a)({overrides:{MuiInputLabel:{root:{color:"orange",fontFamily:"GothamMedium","&$focused":{color:"#1DB954"}}}}}),A=function(e){var t=Object(k.a)((function(t){return{formControl:{margin:t.spacing(1),minWidth:140},selectEmpty:{marginTop:t.spacing(2)},select:{"&:before":{borderColor:"#1DB954"},"&:after":{borderColor:"#1DB954"},color:"white",fontFamily:"GothamMedium"},icon:{fill:e.disabled?"gray":"white"},label:{color:e.disabled?"gray":"white",fontFamily:"GothamMedium","&:active":{color:"#1DB954"},"&:before":{color:"#1DB954"},"&:after":{color:"#1DB954"}},menu:{"& ul":{backgroundColor:"#4e4b4a"},"& li":{color:"white",textAlign:"left",fontFamily:"GothamMedium"},"& li:disabled":{color:"gray"}}}}))(),a=Object(n.useState)(""),r=Object(c.a)(a,2),l=r[0],i=r[1];return o.a.createElement("div",{className:y.a.container},o.a.createElement(w.a,{className:t.formControl},o.a.createElement(O.a,{theme:C},o.a.createElement(E.a,{className:t.label,id:"".concat(e.type,"-select-label")},e.title)),o.a.createElement(_.a,{className:t.select,labelId:"".concat(e.type,"-select-label"),id:"".concat(e.type,"-select"),value:l,onChange:function(t){e.callback&&e.callback(t),i(t.target.value)},MenuProps:{classes:{paper:t.menu}},inputProps:{classes:{icon:t.icon}},disabled:e.disabled},e.children)))},S=a(33),x=a.n(S),N=a(109),B=a(111),G=a(112),D=a(114),M=a(44),T=a.n(M),z=a(54),L="https://spotify-collage.herokuapp.com",P=function(){var e=Object(z.a)(T.a.mark((function e(t,a){var n,o,r,l=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]&&l[2],e.next=3,fetch(L+t,{headers:{Authorization:"Bearer "+a,"Access-Control-Allow-Origin":"*"},redirect:"follow"});case 3:if((o=e.sent).ok){e.next=10;break}if(401!==o.status){e.next=9;break}return e.abrupt("return","unauthorised");case 9:return e.abrupt("return","error");case 10:if(!n){e.next=16;break}return e.next=13,o.blob();case 13:e.t0=e.sent,e.next=19;break;case 16:return e.next=18,o.json();case 18:e.t0=e.sent;case 19:return r=e.t0,console.log(r),e.abrupt("return",r);case 22:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();var R=Object(k.a)((function(e){return Object(D.a)({paper:{minWidth:500,minHeight:500,outline:0,position:"absolute",backgroundColor:"#4e4b4a",boxShadow:e.shadows[5],display:"block",margin:"auto",padding:e.spacing(2,4,3)},loader:{borderColor:"#1DB954",color:"#1DB954",minHeight:200,minWidth:200,marginTop:"25%"}})})),I=function(e){var t=R(),a=o.a.createElement(N.a,{className:t.loader}),r=Object(n.useState)(!0),l=Object(c.a)(r,2),i=l[0],s=l[1],u=Object(n.useState)(!0),p=Object(c.a)(u,2),m=p[0],d=p[1],b=Object(n.useState)(null),g=Object(c.a)(b,2),h=g[0],v=g[1],y=Object(n.useState)(null),_=Object(c.a)(y,2),E=_[0],k=_[1],w=Object(n.useState)(null),j=Object(c.a)(w,2),O=j[0],C=j[1],S=Object(n.useState)(null),D=Object(c.a)(S,2),M=D[0],T=D[1],z=Object(n.useState)(!1),L=Object(c.a)(z,2),I=L[0],F=L[1],W=Object(n.useState)(!1),K=Object(c.a)(W,2),U=K[0],q=K[1],H=Object(n.useState)(a),J=Object(c.a)(H,2),$=J[0],Q=J[1],Z=function(t){return P(t,e.token,!0)},V=function(){q(!1),Q(a),F(!1)},X=function(){var e="";if(h&&E){if(e+="/user/"+h,"recently-played"==h)return e+="/images",e+="?size="+E;if("playlists"==h&&O)return e+="/"+O+"/images",e+="?size="+E;if(M)return e+="/images",e+="?time_range="+M+"&size="+E}return"error"},Y=function(e,t){t(e.target.value)};return o.a.createElement("div",null,o.a.createElement("div",{className:x.a.container},o.a.createElement(A,{callback:function(e){v(e.target.value),"top-artists"===e.target.value||"top-tracks"===e.target.value?(s(!1),d(!0)):"playlists"===e.target.value?(s(!0),d(!1)):(s(!0),d(!0))},title:"Collage Type"},o.a.createElement(B.a,{value:"recently-played"},"Recently Played Tracks (50)"),o.a.createElement(B.a,{value:"top-artists"},"Top Artists"),o.a.createElement(B.a,{value:"top-tracks"},"Top Tracks"),o.a.createElement(B.a,{value:"playlists"},"Playlist")),o.a.createElement(A,{callback:function(e){return Y(e,k)},title:"Size"},o.a.createElement(B.a,{value:2},"2x2"),o.a.createElement(B.a,{value:3},"3x3"),o.a.createElement(B.a,{value:4},"4x4"),o.a.createElement(B.a,{value:5},"5x5"),o.a.createElement(B.a,{value:6},"6x6")),o.a.createElement(A,{callback:function(e){return Y(e,T)},disabled:i,title:"Time Span"},o.a.createElement(B.a,{value:"short_term"},"Short (~4 weeks)"),o.a.createElement(B.a,{value:"medium_term"},"Medium (~6 months)"),o.a.createElement(B.a,{value:"long_term"},"Long (several years)")),o.a.createElement(A,{callback:function(e){return Y(e,C)},disabled:m,title:"Playlist Name"},e.playlists&&e.playlists.map((function(e){return o.a.createElement(B.a,{key:e,value:e},e)})))),o.a.createElement("div",{className:x.a.buttonContainer},o.a.createElement(f,{onClick:function(){var e=X();console.log(e),"error"!=e?(q(!0),Z(e).then((function(e){if("error"==e)return alert("Something went wrong. Refreshingn page..."),void window.location.reload();if("unauthorised"==e)return alert("Auth Token expired. Refreshingn page to acquire a new one..."),void window.location.reload();console.log(e);var t=URL.createObjectURL(e);console.log(t),Q(o.a.createElement("img",{className:x.a.collage,alt:"collage",src:t})),F(!0)}))):alert("Please select all parameters and try again!")},button:!0},"Generate Collage"),o.a.createElement(G.a,{open:U,onClose:V},o.a.createElement("div",{style:{top:"".concat(50,"%"),left:"".concat(50,"%"),textAlign:"center",transform:"translate(-".concat(50,"%, -").concat(50,"%)")},className:t.paper},$,o.a.createElement("div",{className:x.a.buttonContainer},I&&o.a.createElement(f,{onClick:V,button:!0},"Close"))))))},F=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{});window.location.hash="";var W=function(){var e=Object(n.useState)(null),t=Object(c.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),i=Object(c.a)(l,2),u=i[0],m=i[1];return Object(n.useEffect)((function(){var e=!0;console.log(F);var t=F.access_token;return t&&(r(t),P("/user/playlists",t).then((function(t){if(e){if(console.log("data fetched"),"error"==t||"unauthorised"==t)return alert("Something went wrong. Refreshingn page..."),void window.location.reload();m(t.map((function(e){return e.name})))}}))),function(){e=!1}}),[]),o.a.createElement("div",{className:s.a.App},o.a.createElement(h,{src:p.a},"Collage Generator"),o.a.createElement("p",{className:s.a.description},"Our generator uses your recently played songs, top tracks, artists and even playlists to create a collage which you can share with your friends!"),o.a.createElement("p",{className:s.a.description},"Note: If your collage has white, empty squares, you should try choosing smaller size"),!a&&o.a.createElement(f,{link:!0,href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("e34dc5d417494fb6be8b663a9631b502","&redirect_uri=").concat("https://wikkam.github.io/SpotifyCollageFront","&scope=").concat("user-read-private user-read-email playlist-read-private playlist-read-collaborative user-read-recently-played user-top-read","&response_type=token&show_dialog=true")},"Login to Spotify"),a&&o.a.createElement(I,{token:a,playlists:u}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(70);l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[60,1,2]]]);
//# sourceMappingURL=main.e4c96c8e.chunk.js.map